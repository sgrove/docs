import Example from '~/components/example'
import { Code, InlineCode } from '~/components/text/code'
import { GenericLink, HelpLink } from '~/components/text/link'
import Now from '~/components/text/now'
import Endpoint from '~/components/api/endpoint'
import Request from '~/components/api/request'
import EndpointComponent from './endpointComponent.jsx'
import spec from './entireSpec.json'

## Domains

### List all the domains

<EndpointComponent spec={spec} method="GET" url="/v2/domains" />

<Example>
  <span>Example request:</span>

<Request
  url="https://api.zeit.co/v4/domains"
  headers={{
    Authorization: `Bearer ${
      props.testingToken ? props.testingToken.token : '$TOKEN'
    }`
  }}
/>

Example successful (**200**) response:

<Code lang="json">{`{
  "domains": [
    {
      "id": "EmTbe5CEJyTk2yVAHBUWy4A3sRusca3GCwRjTC1bpeVnt1",
      "name": "my-zeit-domain.website",
      "serviceType": "external",
      "nsVerifiedAt": null,
      "txtVerifiedAt": null,
      "cdnEnabled": false,
      "createdAt": 1544658552174,
      "boughtAt": null,
      "verificationRecord": "YMc9dEJKbAncYtTqSH8dp1j5NXycfEzyjkzBJ3m3UGwR43",
      "verified": true,
      "nameservers": [
        "ns1.nameserver.net",
        "ns2.nameserver.net"
      ],
      "intendedNameservers": [
        "a.zeit-world.net",
        "b.zeit-world.co.uk",
        "e.zeit-world.org",
        "f.zeit-world.com"
      ],
      "creator": {
        "id": "ZspSRT4ljIEEmMHgoDwKWDei",
        "username": "zeit_user",
        "email": "demo@zeit.co"
      }
    }
}`}</Code>
</Example>

### Add a New Domain

<EndpointComponent spec={spec} method="POST" url="/v2/domains" />

<Example>
  <span>Example request adding a domain:</span>

<Request
  method="POST"
  url="https://api.zeit.co/v4/domains"
  headers={{
    Authorization: `Bearer ${
      props.testingToken ? props.testingToken.token : '$TOKEN'
    }`,
    'Content-Type': 'application/json'
  }}
  body={{
    name: 'my-zeit-domain.website'
  }}
/>

Successful (**200**) response:

<Code lang="json">{`{
  "domain": {
    "id": "EmTbe5CEJyTk2yVAHBUWy4A3sRusca3GCwRjTC1bpeVnt1",
    "name": "my-zeit-domain.website",
    "serviceType": "external",
    "nsVerifiedAt": null,
    "txtVerifiedAt": null,
    "cdnEnabled": false,
    "createdAt": 1544658552174,
    "boughtAt": null,
    "verificationRecord": "YMc9dEJKbAncYtTqSH8dp1j5NXycfEzyjkzBJ3m3UGwR43",
    "verified": true,
    "nameservers": [
      "ns1.nameserver.net",
      "ns2.nameserver.net"
    ],
    "intendedNameservers": [
      "a.zeit-world.net",
      "b.zeit-world.co.uk",
      "e.zeit-world.org",
      "f.zeit-world.com"
    ],
    "creator": {
      "id": "ZspSRT4ljIEEmMHgoDwKWDei",
      "username": "zeit_user",
      "email": "demo@zeit.co"
    }
  }
}`}</Code>
</Example>

### Verify a Domain

<EndpointComponent spec={spec} method="POST" url="/v2/domains/:name/verify" />

<Example>
<span>Example request verifying a domain after adding the DNS TXT verification record:</span>

<Request
  method="POST"
  url="https://api.zeit.co/v4/domains/my-zeit-domain.website/verify"
  headers={{
    Authorization: `Bearer ${
      props.testingToken ? props.testingToken.token : '$TOKEN'
    }`,
    'Content-Type': 'application/json'
  }}
  body={{}}
/>

Successful (**200**) response:

<Code lang="json">{`{
  "domain": {
    "id": "EmTbe5CEJyTk2yVAHBUWy4A3sRusca3GCwRjTC1bpeVnt1",
    "name": "my-zeit-domain.website",
    "serviceType": "external",
    "nsVerifiedAt": null,
    "txtVerifiedAt": 1546869733102,
    "cdnEnabled": false,
    "createdAt": 1544658552174,
    "expiresAt": null,
    "boughtAt": null,
    "verificationRecord": "YMc9dEJKbAncYtTqSH8dp1j5NXycfEzyjkzBJ3m3UGwR43",
    "verified": true
    "nameservers": [
      "ns1.nameserver.net",
      "ns2.nameserver.net"
    ],
    "intendedNameservers": [
      "a.zeit-world.co.uk",
      "c.zeit-world.org",
      "d.zeit-world.com",
      "f.zeit-world.net"
    ],
    "creator": {
      "id": "ZspSRT4ljIEEmMHgoDwKWDei",
      "username": "zeit_user",
      "email": "demo@zeit.co"
    }
  }
}`}</Code>

Example "Verification Failed" Error:

<Code lang="json">{`{
  "error": {
    "code": "verification_failed",
    "message": "The domain my-zeit-domain.website couldn't be verified. Both nameservers and TXT verification methods failed",
    "name": "my-zeit-domain.website",
    "nsVerification": {
      "name": "my-zeit-domain.website",
      "nameservers": [
        "ns1.nameserver.net",
        "ns2.nameserver.net"
      ],
      "intendedNameservers": [
        "a.zeit-world.co.uk",
        "c.zeit-world.org",
        "d.zeit-world.com",
        "f.zeit-world.net"
      ]
    },
    "txtVerification": {
      "name": "my-zeit-domain.website",
      "values": [],
      "verificationRecord": "YMc9dEJKbAncYtTqSH8dp1j5NXycfEzyjkzBJ3m3UGwR43"
    }
  }
}`}</Code>
</Example>

### Get Information for a Single Domain

<EndpointComponent spec={spec} method="GET" url="/v4/domains/:name" />

<Example>
<span>Example request:</span>

<Request
  url="https://api.zeit.co/v4/domains/my-zeit-domain.website"
  headers={{
    Authorization: `Bearer ${
      props.testingToken ? props.testingToken.token : '$TOKEN'
    }`
  }}
/>

Example successful (**200**) response:

<Code lang="json">{`{
  "domain": {
    "id": "EmTbe5CEJyTk2yVAHBUWy4A3sRusca3GCwRjTC1bpeVnt1",
    "name": "my-zeit-domain.website",
    "serviceType": "external",
    "nsVerifiedAt": null,
    "txtVerifiedAt": null,
    "cdnEnabled": false,
    "createdAt": 1544658552174,
    "expiresAt": null,
    "boughtAt": null,
    "verificationRecord": "YMc9dEJKbAncYtTqSH8dp1j5NXycfEzyjkzBJ3m3UGwR43",
    "verified": false,
    "nameservers": [
      "ns1.nameserver.net",
      "ns2.nameserver.net"
    ],
    "intendedNameservers": [
      "a.zeit-world.co.uk",
      "c.zeit-world.org",
      "d.zeit-world.com",
      "f.zeit-world.net"
    ],
    "creator": {
      "id": "ZspSRT4ljIEEmMHgoDwKWDei",
      "username": "zeit_user",
      "email": "demo@zeit.co"
    },
    "suffix": false,
    "aliases": [],
    "certs": []
  }
}`}</Code>

Example "Not Found" error:

<Code>{`{
  "error": {
    "code": "not_found",
    "message": "Domain name \`my-zeit-domain.online\` not found",
    "name": "my-zeit-domain.online"
  }
}
`}</Code>
</Example>

### Remove a domain by name

<EndpointComponent spec={spec} method="DELETE" url="/v4/domains/:name" />

<Example>
  <span>Example request:</span>

<Request
  method="DELETE"
  url="https://api.zeit.co/v4/domains/my-zeit-domain.website"
  headers={{
    Authorization: `Bearer ${
      props.testingToken ? props.testingToken.token : '$TOKEN'
    }`
  }}
/>

Example successful (**200**) response:

<Code lang="json">{`{
  uid: "EmTbe5CEJyTk2yVAHBUWy4A3sRusca3GCwRjTC1bpeVnt1"
}`}</Code>
</Example>

### Check a domain availability

<EndpointComponent spec={spec} method="GET" url="/v4/domains/status?name" />

<Example>
  <span>Example request:</span>

<Request
  url="https://api.zeit.co/v4/domains/status?name=my-zeit-domain.website"
  headers={{
    Authorization: `Bearer ${
      props.testingToken ? props.testingToken.token : '$TOKEN'
    }`
  }}
/>

Example successful (**200**) response:

<Code lang="json">{`{
  "available": false
}`}</Code>
</Example>

### Check the price of a domain

<EndpointComponent spec={spec} method="GET" url="/v4/domains/price?name" />

<Example>
  <span>Example request:</span>

<Request
  url="https://api.zeit.co/v4/domains/price?name=zeit.rocks"
  headers={{
    Authorization: `Bearer ${
      props.testingToken ? props.testingToken.token : '$TOKEN'
    }`
  }}
/>

Example successful (**200**) response:

<Code lang="json">{`{
  "price": 17,
  "period": 1
}`}</Code>
</Example>

### Purchase a domain

<EndpointComponent spec={spec} method="POST" url="/v4/domains/buy" />

<Example>
  <span>Example request:</span>

<Request
  method="POST"
  url="https://api.zeit.co/v4/domains/buy"
  headers={{
    Authorization: `Bearer ${
      props.testingtoken ? props.testingtoken.token : '$token'
    }`,
    'Content-Type': 'application/json'
  }}
  body={{
    name: 'zeit.rocks'
  }}
/>

Example failed **403** response:

<Code lang="json">{`{
  "error": {
    "code": "not_available",
    "message": "Domain is not available"
  }
}`}</Code>
</Example>
